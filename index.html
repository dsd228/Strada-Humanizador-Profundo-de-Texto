<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MSN Classic ‚Äî R√©plica fiel</title>
  <style>
    /* Estilos pensados para recrear Windows Live Messenger (cl√°sico) */
    :root{
      --win-bg:#e9eef6; /* fondo ventana principal claro */
      --panel:#f4f6fa;     /* paneles internos */
      --accent:#0078d7;    /* azul MSN */
      --accent-dark:#005ea8;
      --text:#111;
      --muted:#586774;
      --border:#cfd9e6;
    }
    html,body{height:100%;margin:0;font-family:Segoe UI, Tahoma, Arial, sans-serif;background:linear-gradient(#dfe8f7,#d8e3f0);color:var(--text)}

    /* Contenedor centro */
    .app{width:980px;margin:28px auto;display:flex;gap:14px}

    /* Ventana izquierda - lista de contactos */
    .contacts-win{width:320px;background:var(--win-bg);border:1px solid var(--border);border-radius:6px;box-shadow:0 3px 0 rgba(0,0,0,0.06)}
    .titlebar{background:linear-gradient(#e9f2ff,#d7eaff);padding:8px 10px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:8px}
    .logo{width:26px;height:26px;background:var(--accent);border-radius:4px;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700}
    .account{flex:1}
    .account .name{font-weight:700;color:var(--accent-dark)}
    .account .mood{font-size:12px;color:var(--muted)}
    .status-select{margin-left:6px;padding:6px;border-radius:4px;border:1px solid var(--border);background:#fff;font-size:13px}

    .search{padding:10px;border-bottom:1px solid var(--border)}
    .search input{width:100%;padding:8px;border:1px solid var(--border);border-radius:3px}

    .groups{padding:8px;max-height:470px;overflow:auto}
    .group{margin-bottom:8px}
    .group .gtitle{font-size:13px;color:var(--accent);font-weight:700;padding:6px 8px;background:linear-gradient(#f7fbff,#f2f8ff);border:1px solid var(--border);border-radius:4px}
    .contact{display:flex;align-items:center;gap:8px;padding:7px;border-radius:4px;margin-top:6px;cursor:pointer}
    .contact:hover{background:rgba(0,120,215,0.06)}
    .avatar{width:36px;height:36px;border-radius:4px;background:#c9d8ee;border:1px solid #b6c7e6;display:flex;align-items:center;justify-content:center;font-weight:700;color:#123}
    .cinfo{flex:1}
    .cname{font-weight:600}
    .cmood{font-size:12px;color:var(--muted)}
    .cstatus{width:10px;height:10px;border-radius:50%;margin-left:6px;box-shadow:0 0 0 2px #fff}
    .online{background:#20c020}
    .away{background:#f0c020}
    .busy{background:#e04b4b}

    /* Ventana de chat (derecha) */
    .chat-win{flex:1;background:var(--panel);border:1px solid var(--border);border-radius:6px;display:flex;flex-direction:column;overflow:hidden}
    .chat-header{display:flex;align-items:center;gap:10px;padding:8px 10px;background:linear-gradient(#f7fbff,#eef6ff);border-bottom:1px solid var(--border)}
    .chat-header .avatar{width:44px;height:44px;border-radius:6px}
    .chat-header .meta{flex:1}
    .chat-header .meta .name{font-weight:700}
    .chat-header .meta .state{font-size:13px;color:var(--muted)}
    .chat-actions{display:flex;gap:6px}
    .btn{background:#fff;border:1px solid var(--border);padding:6px 8px;border-radius:4px;cursor:pointer;font-size:13px}

    .messages{flex:1;padding:12px;display:flex;flex-direction:column;gap:10px;overflow:auto;background:linear-gradient(#ffffff,#f6f9ff)}
    .bubble{max-width:68%;padding:8px 10px;border-radius:8px;box-shadow:0 1px 0 rgba(0,0,0,0.04);font-size:14px}
    .from{align-self:flex-start;background:#fff;border:1px solid var(--border)}
    .me{align-self:flex-end;background:linear-gradient(#dceeff,#c6e0ff);border:1px solid #b7d2ff}
    .msg-meta{font-size:11px;color:var(--muted);margin-top:4px}

    .composer{display:flex;gap:8px;padding:10px;border-top:1px solid var(--border);background:#fbfeff}
    .composer textarea{flex:1;height:72px;padding:8px;border:1px solid var(--border);border-radius:6px;resize:none}
    .composer .tools{display:flex;flex-direction:column;gap:6px}
    .smiley{font-size:20px;cursor:pointer}

    /* Emoticon animado simple */
    .animated-emo{display:inline-block;transform-origin:center;animation:pop 0.9s ease}
    @keyframes pop{0%{transform:scale(0.2)}60%{transform:scale(1.08)}100%{transform:scale(1)}}

    /* Nudge (sacudida) */
    .nudge-shake{animation:shake 0.6s;}
    @keyframes shake{0%{transform:translateX(0)}20%{transform:translateX(-8px)}40%{transform:translateX(8px)}60%{transform:translateX(-6px)}80%{transform:translateX(6px)}100%{transform:translateX(0)}}

    /* Footer mini ayuda */
    .hint{font-size:13px;color:var(--muted);padding:8px 10px;border-top:1px solid var(--border);background:#fbfdff}

    /* Responsive peque√±a */
    @media(max-width:980px){.app{flex-direction:column;width:94%;margin:14px auto}.contacts-win{width:100%}.chat-win{width:100%}}
  </style>
</head>
<body>
  <div class="app" id="app">
    <!-- Ventana contactos -->
    <div class="contacts-win" id="contactsWin">
      <div class="titlebar">
        <div class="logo">MS</div>
        <div class="account">
          <div class="name" id="myName">Tu Nombre</div>
          <div class="mood" id="myMood">Mensaje personal - ¬°Hola!</div>
        </div>
        <select class="status-select" id="statusSel" title="Estado">
          <option value="online">Disponible</option>
          <option value="away">Ausente</option>
          <option value="busy">Ocupado</option>
          <option value="offline">Desconectado</option>
        </select>
      </div>

      <div class="search"><input placeholder="Buscar contactos..." id="searchInput"></div>

      <div class="groups" id="groups">
        <div class="group">
          <div class="gtitle">Amigos</div>
          <div class="contact" data-name="Mar√≠a" data-status="online">
            <div class="avatar">M</div>
            <div class="cinfo"><div class="cname">Mar√≠a</div><div class="cmood">"Siempre online"</div></div>
            <div class="cstatus online" title="Disponible"></div>
          </div>
          <div class="contact" data-name="Lucas" data-status="away">
            <div class="avatar">L</div>
            <div class="cinfo"><div class="cname">Lucas</div><div class="cmood">"Caf√© y c√≥digo"</div></div>
            <div class="cstatus away" title="Ausente"></div>
          </div>
          <div class="contact" data-name="Sof√≠a" data-status="busy">
            <div class="avatar">S</div>
            <div class="cinfo"><div class="cname">Sof√≠a</div><div class="cmood">"Estudiando"</div></div>
            <div class="cstatus busy" title="Ocupado"></div>
          </div>
        </div>

        <div class="group">
          <div class="gtitle">Familia</div>
          <div class="contact" data-name="Pablo" data-status="offline">
            <div class="avatar">P</div>
            <div class="cinfo"><div class="cname">Pablo</div><div class="cmood">"Sin conexi√≥n"</div></div>
            <div class="cstatus" style="background:#9aa7b8" title="Desconectado"></div>
          </div>
        </div>
      </div>

    </div>

    <!-- Ventana de chat -->
    <div class="chat-win" id="chatWin">
      <div class="chat-header">
        <div class="avatar" id="chatAvatar">M</div>
        <div class="meta">
          <div class="name" id="chatName">Seleccion√° un contacto</div>
          <div class="state" id="chatState">‚Äî</div>
        </div>
        <div class="chat-actions">
          <button class="btn" id="btnNudge">Zumbido</button>
          <button class="btn" id="btnSendFile">Enviar archivo</button>
          <button class="btn" id="btnCam">Webcam</button>
        </div>
      </div>

      <div class="messages" id="messages">
        <div class="bubble from">Bienvenido a la r√©plica de MSN cl√°sico. Selecciona un contacto para chatear.</div>
      </div>

      <div class="composer">
        <textarea id="txtMessage" placeholder="Escrib√≠ un mensaje..."></textarea>
        <div class="tools">
          <div>
            <span class="smiley" data-emo=":)">üòä</span>
            <span class="smiley" data-emo=":D">üòÅ</span>
            <span class="smiley" data-emo=":P">üòõ</span>
          </div>
          <button class="btn" id="btnSend">Enviar</button>
        </div>
      </div>

      <div class="hint">Tips: bot√≥n "Zumbido" sacude la ventana. Los emoticones son animados al enviarlos.</div>
    </div>
  </div>

  <script>
    // Comportamiento m√≠nimo para r√©plica fiel
    const contacts = document.querySelectorAll('.contact');
    const chatName = document.getElementById('chatName');
    const chatState = document.getElementById('chatState');
    const chatAvatar = document.getElementById('chatAvatar');
    const messages = document.getElementById('messages');
    const txt = document.getElementById('txtMessage');
    const btnSend = document.getElementById('btnSend');
    const btnNudge = document.getElementById('btnNudge');
    const app = document.getElementById('app');

    function selectContact(el){
      const name = el.dataset.name || 'Contacto';
      const status = el.dataset.status || 'offline';
      chatName.textContent = name;
      chatState.textContent = status === 'online' ? 'Disponible' : status === 'away' ? 'Ausente' : status === 'busy' ? 'Ocupado' : 'Desconectado';
      chatAvatar.textContent = name.charAt(0).toUpperCase();
      // limpiar mensajes y poner saludo
      messages.innerHTML = '';
      addReceived('Hola ‚Äî soy ' + name + '. ¬øQu√© tal?');
    }

    contacts.forEach(c => c.addEventListener('click', ()=> selectContact(c)));

    function addBubble(text, side='me'){
      const div = document.createElement('div');
      div.className = 'bubble ' + (side==='me' ? 'me' : 'from');
      // reemplazo de emoticones simples por span animado
      const html = text.replace(/:\)|:D|:P/g, m => `<span class="animated-emo">${(m===':D'?'üòÅ':m===":P"?'üòõ':'üòä')}</span>`);
      div.innerHTML = html + `<div class="msg-meta">${new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'})}</div>`;
      messages.appendChild(div);
      messages.scrollTop = messages.scrollHeight;
    }

    function addReceived(text){ addBubble(text,'from'); }

    btnSend.addEventListener('click', ()=>{
      const v = txt.value.trim();
      if(!v) return;
      addBubble(v,'me');
      txt.value='';
      // respuesta autom√°tica simulada
      setTimeout(()=> addReceived('Recibido: '+ v.substring(0,120)),700);
    });

    // Enviar emoticons con click
    document.querySelectorAll('.smiley').forEach(s=> s.addEventListener('click', ()=>{
      txt.value += (txt.value? ' ' : '') + s.dataset.emo;
      txt.focus();
    }));

    // Nudge - sacudir
    btnNudge.addEventListener('click', ()=>{
      const win = document.querySelector('.chat-win');
      win.classList.remove('nudge-shake');
      void win.offsetWidth; // reflow para reiniciar la animaci√≥n
      win.classList.add('nudge-shake');
      // sonido "zumbido" (si el navegador lo permite)
      try{ const osc = new (window.AudioContext||window.webkitAudioContext)(); const o = osc.createOscillator(); const g = osc.createGain(); o.connect(g); g.connect(osc.destination); o.frequency.value = 600; g.gain.value = 0.05; o.start(); setTimeout(()=>{o.stop(); osc.close();},120);
      }catch(e){}
    });

    // Buscar contactos
    document.getElementById('searchInput').addEventListener('input', (e)=>{
      const q = e.target.value.toLowerCase();
      document.querySelectorAll('.contact').forEach(c=>{
        const name = c.querySelector('.cname').textContent.toLowerCase();
        c.style.display = name.includes(q) ? 'flex' : 'none';
      });
    });

    // Cambiar estado personal
    document.getElementById('statusSel').addEventListener('change', (e)=>{
      const v = e.target.value; document.getElementById('myMood').textContent = v === 'online' ? 'Disponible' : v === 'away' ? 'Ausente' : v === 'busy' ? 'Ocupado' : 'Desconectado';
    });

    // Atajo Enter para enviar
    txt.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' && !e.shiftKey){ e.preventDefault(); btnSend.click(); } });

    // Init: seleccionar primer contacto
    selectContact(document.querySelector('.contact'));
  </script>
</body>
</html>
